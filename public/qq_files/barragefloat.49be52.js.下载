!function(n){var a={};function i(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=275)}({275:function(t,e,n){t.exports=n(276)},276:function(t,e,n){var a=Txplayer.$;n(277);var i=n(278),o=n(279),r=n(58),s=window.barrageReport,c=window.vodFloat,l="",d=Txplayer.util;function u(t){this.msg=t.msg,this.dataset={maxUp:0,totalUp:0,speed:1,rate:1},this.context=t.context,this.util=t.util,this._write(),this.addEvent()}void 0!==document.hidden?l="hidden":"undefined"!==document.webkitHidden?l="webkitHidden":"undefined"!==document.mozHidden?l="mozHidden":"undefined"!==document.msHidden&&(l="msHidden"),u.prototype={_write:function(){if(!this.dataset.isRender){this.dataset.isRender=!0;var t,e=a.tmpl(i),n=a.tmpl(o);this.context.dataset.$playermod.append(e),this.context.dataset.$playermod.append(n),this.dataset.$mod=this.context.dataset.$playermod.find("[data-role=txp_barrage_float]"),this.dataset.$report=this.context.dataset.$playermod.find("[data-role=txp_barrage_report]"),this.context.dataset.$barrageMod=this.dataset.$mod,this.dataset.width=this.context.dataset.$barrageMod.width(),this.dataset.height=this.context.dataset.$barrageMod.height();try{this.dataset.float=new c({wrapper:this.context.dataset.$barrageMod[0],fps:40,defaultNum:5,enablePosition:!0,videoTag:this.context.msg.getData("getFocusVideoTag"),report:this.dataset.$report,enableEgg:!0,autoFont:!0,marginBottom:60,enableMouseEvent:!0})}catch(t){}t="coolOpen"==this.context.config.playerType?a("body"):this.context.dataset.$playermod,this.dataset.reporter=new s(t)}},closeBrowserFullscreen:function(){this.context.dataset.isBrowserFullscreen&&this.context.msg.broadcast("exitBrowserFullscreen")},closeWindowsFullscreen:function(){this.context.dataset.isWindowFullscreen&&this.context.msg.broadcast("exitWindowFullscreen")},closeFullScreen:function(){this.closeBrowserFullscreen(),this.closeWindowsFullscreen()},addEvent:function(){var o=this;function t(t){o.dataset.float.end(),t&&(o.dataset.isOpen=t&&1==t.open,t&&0===t.returncode&&t.registid&&(o.dataset.targetId=t.registid,o.dataset.float.vodInit(t),o.dataset.float.addIntroTxt&&o.dataset.float.addIntroTxt(t.barrageNum))),o.context.msg.broadcast("barrageFloatEventAdd")}function e(t){o.dataset.float&&o.dataset.float.updateRichData(t)}o.dataset.switchStatus=o.context.dataset.flashBulletSwitchStatus,o.dataset.playState=o.context.dataset.playState,o.dataset.smallWindowMode=o.context.dataset.isSmallWindowMode,o.dataset.float.on("report",function(t){var e,n,a,i;t.targetId=o.dataset.targetId,o.getLoginStatus()?(a=0<(n=(e=t.targetId||"").indexOf("&vid"))?e.substring(0,n):e,i=setTimeout(function(){o.dataset.reporter&&o.dataset.reporter.init(t)},800),Txplayer.msg.on("barrage:report:confirmed",function(){clearTimeout(i)}),Txplayer.msg.broadcast("barrage:report",{id:t.id,targetid:a}),"coolOpen"===o.context.config.playerType&&o.closeFullScreen()):"coolOpen"===o.context.config.playerType?(window.txv&&window.txv.login.openLogin(),o.closeFullScreen()):o.msg.emit("showLogin")}),o.dataset.float.on("showDanmu",function(n){var t,e;n&&n.originContent&&((e=null===(t=o.context)||void 0===t?void 0:t.dataset.eggKeyWord)&&e.length&&a.each(e,function(t,e){-1!=n.originContent.indexOf(e)&&window.js_setDropMatch&&window.js_setDropMatch({keyword:e,from:1==n.isself?0:1})}))}),o.dataset.float.on("lineUpdate",function(t){o.context.msg.broadcast("maxAreaUpdate",t)}),o.dataset.float.on("danmuClick",function(){o.getLoginStatus()||o.msg.emit("showLogin")}),o.context.msg.on("bulletReady",t),o.context.msg.on("richDataReady",e),o.context.msg.on("isPlayingAdStatusChange",function(t){t&&o.dataset.float.end()}),o.context.msg.on("videoTimeUpdate",function(){var t=o.context.dataset.currentTime;o.dataset.float.updateTime(t)}),o.context.msg.on("playbackRateChange",function(t){o.dataset.rate=t,o.dataset.float.setRate(o.dataset.rate*o.dataset.speed)}),o.context.msg.on("seekStart",function(t,e){o.dataset.float._clear()}),o.msg.on("txv_barragefakewrite",function(t){var e=t.postData,n={bb_head:e.bb_head||"",bb_id:e.strRichId||"",bb_level:e.bb_level||"",commentid:"",content:e.sContent||"",content_style:e.strColorInfoJson||"",headurl:r.getAvatar(40)||"",isfriend:0,isop:0,isself:1,opername:"",rich_type:e.richIdType||0,upcount:0,uservip_degree:e.userVipDegree||0,key:t.key};o.dataset.float.add(n)}),o.msg.on("txv_barragePostSuccess",function(t){o.dataset.float.setKeyMap(t.key,t.commentid)}),o.context.msg.on("flashBulletSwitchStatusChange",function(t){o.dataset.switchStatus=t,o.getFloatStatus("flashBulletSwitchStatusChange")}),o.context.msg.on("smallWindowModeChange",function(t){t&&(o.dataset.smallWindowMode=t.isSmallWindow,o.getFloatStatus("smallWindowModeChange"))}),o.context.msg.on("playStateChange.float",function(t){t&&(o.context.dataset.playState=t.state,o.getFloatStatus("playStateChange"))}),a(document).on(d.getNSEventName("visibilitychange",o.context),function(){o.getFloatStatus("visibilitychange")},!1),o.context.msg.on("videoPlaying",function(){"film"==o.context.dataset.currentPlayListType&&o.getFloatStatus("videoPlaying")}),o.context.msg.on("videoScreenPercentChange",function(t){100==t&&o.dataset.maskShow?o.dataset.float&&o.dataset.float.enableMask():o.dataset.float&&o.dataset.float.disableMack()}),o.context.msg.on("setBarrageDisplay",function(t){o.dataset.float&&(o.dataset.speed=t.speed/100,o.dataset.float.setRate(o.dataset.rate*o.dataset.speed),o.dataset.float.setOpacity(t.alpha/100),o.dataset.float.setFont(t.fontSize),t.topShow?o.dataset.float.showTop():o.dataset.float.hideTop(),t.bottomShow?o.dataset.float.showBottom():o.dataset.float.hideBottom(),t.flowShow?o.dataset.float.showScroll():o.dataset.float.hideScroll(),t.colorShow?o.dataset.float.enableColor():o.dataset.float.disableColor(),o.dataset.float.setLine(t.area),t.maskShow?(o.dataset.maskShow=!0,o.dataset.float.enableMask()):(o.dataset.maskShow=!1,o.dataset.float.disableMack()))}),o.context.dataset.barrageRegistData&&(t(o.context.dataset.barrageRegistData),o.getFloatStatus()),o.context.dataset.danmuRichData&&e(o.context.dataset.danmuRichData),o.dataset.size_TIMER=setInterval(function(){var t=o.context.dataset.$barrageMod.width(),e=o.context.dataset.$barrageMod.height();o.dataset.width==t&&o.dataset.height==e||(o.dataset.float.updateSize(),o.dataset.width=t,o.dataset.height=e)},1500)},isUserOpenBullet:function(){return this.context.config.showBullet},getFloatStatus:function(){var t=this;!t.dataset.isOpen||!t.dataset.switchStatus||t.dataset.smallWindowMode||1!=t.context.dataset.playState&&2!=t.context.dataset.playState&&3!=t.context.dataset.playState||(!l||document[l])&&l?t.dataset.float.end():1==t.context.dataset.playState?t.dataset.float.play():t.dataset.float.pause()},getLoginStatus:function(){return this.context.config&&this.context.config.loginHandler&&this.context.config.loginHandler.isLogin?this.context.config.loginHandler.isLogin():r.isLogin()}},Txplayer.register("BarrageFloat",u)},277:function(t,e,n){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,a,i,o,r){try{var s=t[o](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,i)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function g(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a,i=s(o);return e=r?(t=s(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),n=this,!(a=e)||"object"!==O(a)&&"function"!=typeof a?l(n):a}}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(t){i=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function u(t,e){return t(e={exports:{}},e.exports),e.exports}Object.defineProperty(e,"__esModule",{value:!0}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n+=1){var a=arguments[n];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},writable:!0,configurable:!0});function h(t){return null!=t}function p(t){var e;if(h(e=t)&&hasOwnProperty.call(S,O(e)))try{return t.constructor?t.constructor.prototype===t:!1}catch(t){return}}function x(t){return!!function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!p(t)}(t)&&!C.test(L.call(t))}function v(t){return null!=t}function y(t){var e=R(null);return B.call(arguments,function(t){v(t)&&function(t,e){var n;for(n in t)e[n]=t[n]}(Object(t),e)}),e}function b(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}var w,k,S={object:!0,function:!0,undefined:!0},C=/^\s*class[\s{/}]/,L=Function.prototype.toString,T=Object.keys,j=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}()?Object.keys:function(t){return T(v(t)?Object(t):t)},M=Math.max,F="function"==typeof(k=Object.assign)&&(k(w={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),w.foo+w.bar+w.trzy==="razdwatrzy")?Object.assign:function(e,n){var a,t,i,o=M(arguments.length,2);for(e=Object(function(t){if(!v(t))throw new TypeError("Cannot use null or undefined");return t}(e)),i=function(t){try{e[t]=n[t]}catch(t){a=a||t}},t=1;t<o;++t)j(n=arguments[t]).forEach(i);if(void 0!==a)throw a;return e},B=Array.prototype.forEach,R=Object.create,E="razdwatrzy",D=String.prototype.indexOf,A="function"==typeof E.contains&&(!0===E.contains("dwa")&&!1===E.contains("foo"))?String.prototype.contains:function(t,e){return-1<D.call(this,t,e)},I=u(function(t){(t.exports=function(t,e){var n,a,i,o,r;return arguments.length<2||"string"!=typeof t?(o=e,e=t,t=null):o=arguments[2],h(t)?(n=A.call(t,"c"),a=A.call(t,"e"),i=A.call(t,"w")):a=!(n=i=!0),r={value:e,configurable:n,enumerable:a,writable:i},o?F(y(o),r):r}).gs=function(t,e,n){var a,i,o,r;return"string"!=typeof t?(o=n,n=e,e=t,t=null):o=arguments[3],h(e)?x(e)?h(n)?x(n)||(o=n,n=void 0):n=void 0:(o=e,e=n=void 0):e=void 0,i=h(t)?(a=A.call(t,"c"),A.call(t,"e")):!(a=!0),r={get:e,set:n,configurable:a,enumerable:i},o?F(y(o),r):r}}),H=u(function(t,e){var c=Function.prototype.apply,l=Function.prototype.call,a=Object.create,i=Object.defineProperty,n=Object.defineProperties,d=Object.prototype.hasOwnProperty,o={configurable:!0,enumerable:!1,writable:!0},r=function(t,e){var n;return b(e),d.call(this,"__ee__")?n=this.__ee__:(n=o.value=a(null),i(this,"__ee__",o),o.value=null),n[t]?"object"===O(n[t])?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},s=function(t,e){var n,a;return b(e),r.call(a=this,t,n=function(){u.call(a,t,n),c.call(e,this,arguments)}),n.__eeOnceListener__=e,this},u=function(t,e){var n,a,i,o;if(b(e),!d.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"===O(a=n[t]))for(o=0;i=a[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===a.length?n[t]=a[o?0:1]:a.splice(o,1));else a!==e&&a.__eeOnceListener__!==e||delete n[t];return this},h=function(t,e,n){var a,i,o,r,s;if(d.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"===O(r)){for(i=arguments.length,s=new Array(i-1),a=1;a<i;++a)s[a-1]=arguments[a];for(r=r.slice(),a=0;o=r[a];++a)c.call(o,this,s)}else switch(arguments.length){case 1:l.call(r,this);break;case 2:l.call(r,this,e);break;case 3:l.call(r,this,e,n);break;default:for(i=arguments.length,s=new Array(i-1),a=1;a<i;++a)s[a-1]=arguments[a];c.call(r,this,s)}},p={on:r,once:s,off:u,emit:h},f={on:I(r),once:I(s),off:I(u),emit:I(h)},g=n({},f);t.exports=e=function(t){return null==t?a(g):n(Object(t),f)},e.methods=p});H.methods;function N(t,e,n){this.now=0,this.afternow=0,this.delta=0,this.fps=t||10,this.interval=parseInt(1e3/t,10),this.callback=e||"",this.timecount=0,this.running=!1,this.timemode=n||"auto",this.index=Date.now(),"timeout"!==this.timemode&&(this.timemode="auto"),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}N.prototype={setCallBack:function(t){t&&(this.callback=t)},start:function(t){t&&(this.callback=t),this.running||(this.running=!0,this.afternow=Date.now(),this._timeupdate())},stop:function(){this.running&&(this.running=!1),window.requestAnimationFrame?window.cancelAnimationFrame(this.timecount):clearTimeout(this.timecount),this.timecount=0},isRunning:function(){return this.running},_timeupdate:function(){window.requestAnimationFrame&&"timeout"!==this.timemode?this._rafMode():this._timeoutMode()},_rafMode:function(){this.timecount=requestAnimationFrame(this._timeupdate.bind(this)),this.now=Date.now(),this.delta=this.now-this.afternow,this.delta>=this.interval&&this.callback&&(this.afternow=this.now-this.delta%this.interval,this.callback((this.delta/this.interval).toFixed(2)))},_timeoutMode:function(){this.timecount=setTimeout(this._timeupdate,this.interval),this.callback()}};var P=function(t,e,n){return new N(t,e,n)};var z=function(t){var e=[],n=0,a=[];return{get:function(){return e.length?e.shift():n<200?(n+=1,new t):null},save:function(t){t&&e.push(t)},getLength:function(){return e.length},getAll:function(){return a}}},q='<txpdiv class="txp_barrage_item">\n    <txpdiv class="txp_text"></txpdiv>\n</txpdiv>',U='<txpdiv class="txp_barrage_item_top">\n    <txpdiv class="txp_text"></txpdiv>\n</txpdiv>',W='<txpdiv class="txp_barrage_item_bottom">\n    <txpdiv class="txp_text"></txpdiv>\n</txpdiv>',Q={hasClass:function(t,e){return t&&t.className&&-1<t.className.indexOf(e)},addClass:function(t,e){var n;this.hasClass(t,e)||t&&(t.className&&0!==t.className.length?((n=t.className.split(" ")).push(e),t.className=n.join(" ")):t.className=e)},removeClass:function(t,e){var n,a;this.hasClass(t,e)&&(a=(n=t.className.split(" ")).indexOf(e),n.splice(a,1),t.className=n.join(" "))},css:function(t,e,n){if(t&&e){if(void 0===n&&"string"==typeof e)return;if(void 0===n&&"object"===r(e)){var a=e;for(var i in a)a.hasOwnProperty(i)&&(/width|height|left|right|top|bottom/.test(i)&&"number"==typeof a[i]&&(a[i]="".concat(a[i],"px")),t.style[i]=a[i])}else{var o;"string"!=typeof e||"string"!=typeof n&&"number"!=typeof n||(o=n,/width|height|left|right|top|bottom/i.test(e)&&"number"==typeof n&&(o="".concat(n,"px")),t.style[e]=o)}}}};function V(t){return"string"!=typeof t?t:t.replace(/\?.+/g,"")}var J=function(r){var o=1;return new Promise(function(t,e){(function(){for(var t=document.querySelectorAll('link[rel="stylesheet"]'),e=function(t){var e=t,n=e.indexOf("?");0<n&&(e=e.slice(0,n));var a=e.lastIndexOf("/");return 0<a&&(e=e.slice(a+1,e.length)),e},n=e(r),a=null,i=t.length,o=0;o<i;o+=1){if((a=t[o])&&a.href)if(e(a.href)===n)return!0}return!1})()?t():function t(e,n,a){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onload=function(){n()},i.onerror=function(){3<=o?a():(o+=1,i.parentNode.removeChild(i),t("".concat(V(e),"?v=").concat(parseInt(1e10*Math.random()))))},i.href=e,document.head.appendChild(i)}(r,t,e)})},G=function(){function t(){f(this,t),this.domlist=[],this.lastDom={}}return g(t,[{key:"handleDom",value:function(t){for(var e=this.domlist.length-1;0<=e;--e)t&&t(this.domlist[e])&&this.domlist.splice(e,1)}},{key:"checkLast",value:function(e){var n=this;Object.keys(this.lastDom).forEach(function(t){e(n.lastDom[t],t)})}},{key:"push",value:function(t,e){this.domlist.push(t),this.lastDom[e]=t}}]),t}();var Z=function(){function e(t){f(this,e),this.list={scroll:{show:{},cache:{}}},this.enablePosition=!!t,this.enablePosition&&(this.list.top={show:{},cache:{}},this.list.bottom={show:{},cache:{}})}return g(e,[{key:"addList",value:function(t){if(a=t,"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a))for(var e=0,n=t.length;e<n;e+=1)this.addBarrage(t[e]);else this.addBarrage(t);var a}},{key:"addBarrage",value:function(t){var e;"[object Object]"===Object.prototype.toString.call(t)&&(t.html||t.content)&&(e=t.position||1,this.enablePosition||(e=1),this.add(t,e))}},{key:"getList",value:function(t){var e;switch(t){case 1:e=this.list.scroll;break;case 5:e=this.list.top;break;case 6:e=this.list.bottom;break;default:e=this.list.scroll}return e}},{key:"add",value:function(t,e){var n=this.getList(e),a=t.mustShow?n.show:n.cache;t.index?(a[t.index]||(a[t.index]=[]),a[t.index].push(t)):(a.priority||(a.priority=[]),a.priority.push(t))}},{key:"get",value:function(t,e){var n=this.getList(e);return n.show.priority&&n.show.priority.length?n.show.priority.shift():n.show[t]&&n.show[t].length?n.show[t].shift():n.cache[t]&&n.cache[t].length?n.cache[t].shift():n.cache.priority&&n.cache.priority.length?n.cache.priority.shift():null}},{key:"reset",value:function(){this.list.scroll.show={},this.list.scroll.cache={},this.enablePosition&&(this.list.top.show={},this.list.top.cache={},this.list.bottom.show={},this.list.bottom.cache={})}},{key:"clear",value:function(){this.list.scroll.cache={},this.enablePosition&&(this.list.top.cache={},this.list.bottom.cache={})}}]),e}(),K={fps:60,speed:2,rate:1,top:!1,bottom:!1,star:!1,gift:!1,lineHeight:36,enableSetArea:!1,userNum:5,interval:30,cssUrl:"//vm.gtimg.cn/c/=/tencentvideo/txp/style/txp_barrage.css,/tencentvideo/vstyle/web/common/style/css/x_dialog.css",fontSize:"m",opacity:1,enableColor:!0,enablePosition:!1,enableEgg:!1,autoFont:!1,loop:!1,marginBottom:0,enableMouseEvent:!1};function X(t,e){var n={xxs:15,xs:19,s:21,m:23,l:25,xl:27,xxl:31},a=t<=1024?{xxs:12,xs:14,s:16,m:18,l:20,xl:22,xxl:26}:1024<t&&t<=1240?{xxs:13,xs:17,s:19,m:21,l:23,xl:25,xxl:29}:1240<t&&t<=1600?n:1600<t&&t<=1920?{xxs:17,xs:21,s:23,m:25,l:27,xl:29,xxl:33}:1920<t?{xxs:25,xs:29,s:31,m:33,l:35,xl:37,xxl:41}:n;return a[e]}var Y,tt,et=function(){function p(t){f(this,p),H(this);var e,n,a,i,o,r,s,c,l,d,u,h={};Object.assign(h,K,t),h.cssUrl&&this._loadStyle(h.cssUrl),this._initDataset(h),this._write(h.wrapper),this._windowResize(),this.Timer=P(h.fps),this.Timer.setCallBack(this.Animation.bind(this)),this._clickHandler&&(e=this._clickHandler.bind(this)),this._menuHandler&&this._menuHandler.bind(this),this._reportHandler&&(n=this._reportHandler.bind(this)),this.Factory=(a=this.dataset.$container,i=e,o=this.dataset.enableMouseEvent,r=i||null,s=n||null,c=!!o,l=function(){function t(){f(this,t),this._left=0,this._top=0,this._bottom=0,this._dom=null,this._animate=null,this._trail=-1,this._width=0,this.el=null,this.elText=null,this.fontSize=0,this.height=0,this.enableColor=!0,this.currentColor="",this.id=null,this.originContent="",this.isSys=!1,this.count=0,this.isStar=!1,this.class="txp_animate",this.hide="txp_none"}return g(t,[{key:"render",value:function(t,e,n){var a;this.el||(this.write(),this.addClickEvent()),a=t.html?(this.el.innerHTML=t.html,t.html.length||0):(this.el.innerText=t.content,t.content.length||0),t.contentLength||(t.contentLength=a),t.width?this._width=t.width:this._width=e?t.contentLength*e+70:t.contentLength*n/1.5+70,this.font(e,n),t.gradienColor?this.gradienColor(t.gradienColor):this.color(t.color||"#ffffff"),t.id?this.id=t.id:this.id=null,t.originContent?this.originContent=t.originContent:this.originContent="",this.isSys=!!t.isSys,this.isStar=!!t.isStar,this.count=0,this.isStar?Q.addClass(this.el,"txp_barrage_item_speaker"):Q.removeClass(this.el,"txp_barrage_item_speaker"),t.isself?Q.addClass(this.el,"txp_barrage_item_self"):Q.removeClass(this.el,"txp_barrage_item_self")}},{key:"font",value:function(t,e){t?this.fontSize!==+t&&(this.fontSize=t,this.height=Math.ceil(1.8*t),this.el.style.fontSize="".concat(t,"px"),this.el.style.lineHeight="".concat(this.height-8,"px"),this.el.style.height="".concat(this.height,"px")):e&&this.height!==+e&&(this.height=e,this.el.style.height="".concat(this.height,"px"),this.el.style.lineHeight="".concat(this.height,"px"),this.el.style.padding=0)}},{key:"color",value:function(t){t&&(this.disableColor(),Q.css(this.el,"color",t))}},{key:"gradienColor",value:function(t){t?t[1]!==t[0]?(Q.css(this.el,"color",t[1]),Q.css(this.el,"background-image","linear-gradient(to right,".concat(t[0]," 0,").concat(t[1]," 100%)")),Q.css(this.el,"-webkit-text-fill-color","transparent"),Q.css(this.el,"background-repeat","repeat"),Q.css(this.el,"-webkit-background-clip","text"),Q.css(this.el,"text-shadow","none")):this.color(t[1]):this.disableColor()}},{key:"disableColor",value:function(){Q.css(this.el,"background-image",""),Q.css(this.el,"-webkit-text-fill-color",""),Q.css(this.el,"background-repeat",""),Q.css(this.el,"-webkit-background-clip",""),Q.css(this.el,"text-shadow","")}},{key:"addClickEvent",value:function(){var n=this;r&&this.el.addEventListener("click",function(t){var e=t.target.className;s&&"string"==typeof e&&-1<e.indexOf("report")?s({danmuItem:n}):r(n)})}},{key:"left",get:function(){return this._left}},{key:"trail",get:function(){return this._trail},set:function(t){this._trail=0<t?t:-1}},{key:"width",get:function(){return this._width}}]),t}(),d=function(){m(n,l);var e=_(n);function n(){var t;return f(this,n),(t=e.call(this)).isHove=!1,t}return g(n,[{key:"toggleUpAndReportButton",value:function(t){var e=this.el.getElementsByClassName("txp_barrage_badge")[0],n=this.el.getElementsByClassName("txp_barrage_badge")[1];t?(Q.removeClass(e,this.hide),Q.removeClass(n,this.hide)):(Q.addClass(e,this.hide),Q.addClass(n,this.hide))}},{key:"write",value:function(){var t=this,e=document.createElement("div");e.innerHTML=q,this.el=e.firstChild,a.appendChild(this.el);var n=this.el.getElementsByClassName("txp_text")[0];this.elText=n,c&&(this.el.addEventListener("mouseenter",function(){t.isSys||t.isStar||(Q.addClass(t.el,"txp_barrage_item_hover"),t.toggleUpAndReportButton(!0),t.isHove=!0)}),this.el.addEventListener("mouseleave",function(){t.isSys||t.isStar||(Q.removeClass(t.el,"txp_barrage_item_hover"),window.$(t.el).find(".like").addClass("txp_none"),t.toggleUpAndReportButton(!1),t.isHove=!1)}))}},{key:"move",value:function(t,e){this.isStar&&t<3&&-10<t&&this.count<120?this.count+=1:(this._left=t,0<=e&&e!==this._top&&(this._top=e),this.el.style.transform="translate3D(".concat(this._left,"px, ").concat(this._top,"px, 1px)"))}}]),n}(),u=function(){m(n,l);var e=_(n);function n(){var t;return f(this,n),(t=e.call(this)).available=!0,t.isHover=!1,t.paused=!1,t}return g(n,[{key:"pauseAnimate",value:function(t){t&&(this.paused=!0),Q.css(this.el,"opacity",1),Q.css(this.el,"animation-play-state","paused"),Q.css(this.el,"-webkit-animation-play-state","paused")}},{key:"resumeAnimate",value:function(t){t&&(this.paused=!1),Q.css(this.el,"opacity",""),Q.css(this.el,"animation-play-state","running"),Q.css(this.el,"-webkit-animation-play-state","running")}},{key:"removeAnimate",value:function(){var t=this;this.el&&(Q.removeClass(this.el,this.class),Q.addClass(this.el,this.hide)),setTimeout(function(){t.available=!0},100)}},{key:"startAnimate",value:function(){this.available=!1,Q.addClass(this.el,this.class),Q.removeClass(this.el,this.hide)}},{key:"setBottom",value:function(t){0<=t&&t!==this._bottom&&(this._bottom=t),this.el.style.bottom="".concat(this._bottom,"px"),this.startAnimate()}},{key:"setTop",value:function(t){0<=t&&t!==this._top&&(this._top=t),this.el.style.top="".concat(this._top,"px"),this.startAnimate()}},{key:"addEvent",value:function(){var t=this;this.el.addEventListener("animationend",function(){t.removeAnimate()}),this.el.addEventListener("mouseenter",function(){Q.addClass(t.el,"txp_barrage_item_hover"),t.pauseAnimate(),t.isHover=!0}),this.el.addEventListener("mouseleave",function(){Q.removeClass(t.el,"txp_barrage_item_hover"),t.paused||t.resumeAnimate(),t.isHover=!1})}}]),n}(),{baseBarrage:l,scrollBarrage:d,TopBarrage:function(){m(e,u);var t=_(e);function e(){return f(this,e),t.apply(this,arguments)}return g(e,[{key:"write",value:function(){var t=document.createElement("div");t.innerHTML=U,this.el=t.firstChild,a.appendChild(this.el);var e=this.el.getElementsByClassName("txp_text")[0];this.elText=e,this.addEvent()}}]),e}(),BottomBarrage:function(){m(e,u);var t=_(e);function e(){return f(this,e),t.apply(this,arguments)}return g(e,[{key:"write",value:function(){var t=document.createElement("div");t.innerHTML=W,this.el=t.firstChild,a.appendChild(this.el);var e=this.el.getElementsByClassName("txp_text")[0];this.elText=e,this.addEvent()}}]),e}()}),this.BarragePool=z(this.Factory.scrollBarrage),this.active=new G,this.list=new Z(this.dataset.enablePosition)}return g(p,[{key:"_loadStyle",value:function(t){var e=this;J(t).then(function(){e.updateSize()})}},{key:"_initDataset",value:function(t){this.dataset={currentBlock:0,index:0,interval:t.interval,width:"",height:"",speed:t.speed,rate:t.rate,realSpeed:{0:t.speed*t.rate*1.5,1:t.speed*t.rate*1},keyMap:{},lineHeight:t.lineHeight,state:3,timerState:3,fps:t.fps,count:0,fontSetting:"m",fontSize:t.autoFont?X(1241,"m"):0,opacity:t.opacity,userNum:t.userNum,maxNum:0,actualNum:0,enableColor:t.enableColor,enableScroll:!0,enableTop:!0,enableBottom:!0,enableStar:!0,enablePosition:t.enablePosition,enableEgg:t.enableEgg,autoFont:t.autoFont,loop:t.loop,marginBottom:t.marginBottom,enableMouseEvent:t.enableMouseEvent}}},{key:"_write",value:function(t){var e=document.createElement("div");e.innerHTML='<txpdiv class="txp_barrage txp_barrage_external" style="position:absolute;top:0;left:0;width:100%;height:100%;overflow: hidden;">\n        <style type="text/css">\n            #barrageReport .x_modal_bd{\n                padding: 10px 40px 0px 40px;\n            }\n            .txp_barrage{\n                top: 0px;\n                right:0px;\n                bottom: 0px;\n                left: 0px;\n                /* height: 50%;\n                width:50%; */\n                position: absolute;\n                margin: auto;\n            }\n            .txp_barrage .txp_barrage_plusone {\n                font-size: 0.95em;\n            }\n            .txp_barrage .txp_barrage_avatar,.txp_barrage .txp_barrage_emoji{\n                height: 100%;\n                width:unset;\n            }\n            .txp_barrage .txp_barrage_avatar{\n                margin-right:unset; \n            }\n            .txp_barrage .txp_barrage_item .txp_text{\n                height: 100%;\n                background: inherit;\n                -webkit-text-fill-color: inherit;\n                padding: 0;\n            }\n            .txp_barrage .txp_barrage_item_bubble{\n                border-radius:  9999px;\n            }\n            .txp_barrage .txp_barrage_plusone {\n                right: 88px;\n            }\n            .txp_barrage .txp_barrage_plusone_short {\n                right: 10px;\n            }\n            .txp_barrage_item_bubble_front{\n                display: inline-block;\n                position: relative;\n                height: 100%;\n                vertical-align: middle;\n            }\n            .txp_barrage_item_bubble_front .txp_barrage_vipicon{\n                right: 0;\n                bottom: 0;\n                top:unset;\n                left: unset;\n                height: 40%;\n            }\n            .txp_barrage .txp_svg_icon_like {\n                height: 100%;\n                width: 1.27em;\n            } \n            .txp_barrage .txp_svg_icon_report{\n                height: 100%;\n                margin-top: 0;\n                width: 1.25em;\n            }\n            .txp_barrage .txp_barrage_badge.txp_barrage_badge_like .txp_icon_text,\n            .txp_barrage .txp_barrage_badge.txp_barrage_badge_report .txp_icon_text{\n                margin-left: 0px;\n                vertical-align: top;\n            }\n            .txp_barrage .txp_barrage_badge.txp_barrage_badge_report {\n                margin-left: 0.14em;\n            }\n            .txp_barrage .txp_barrage_badge.txp_barrage_badge_report .txp_icon_text{\n                margin-left: 0px;\n            }\n            .txp_barrage .txp_barrage_badge{\n                height: 100%;\n                background: unset;\n                -webkit-text-fill-color: white;\n                color: white;\n            }\n            .txp_barrage .txp_barrage_badge .txp_icon_text{\n                -webkit-text-fill-color: white;\n            }\n            .txp_barrage .txp_barrage_item_hover {\n                background: rgba(0,0,0,0.7) !important;\n                color:white !important;\n                border-radius: 99999px;\n                z-index: 1;\n                -webkit-text-fill-color:unset !important;\n            }\n            .txp_barrage .txp_barrage_item_speaker {\n                background-image: linear-gradient(to right,rgba(255,92,56,0.9) 0,rgba(253,177,41,0.9) 100%)!important;\n                color:white !important;\n                border-radius: 99999px;\n                z-index: 1;\n                -webkit-text-fill-color:unset !important;\n                text-shadow: unset !important;\n                stroke: unset !important;           \n\n            }\n            .txp_barrage .txp_barrage_item_speaker .txp_barrage_item_wrapper{\n                background: unset !important;\n            }\n            .txp_barrage .txp_barrage_itxp_barrage_item_speakertem_star .txp_text{\n                background: unset !important;\n            }\n\n            .txp_barrage .txp_barrage_item {\n                padding: 0.2222em 1.3888em; \n            }\n            .txp_barrage .txp_barrage_item_wrapper{\n                background: inherit;\n                -webkit-text-fill-color: inherit;\n                line-height: 1em;\n            }\n            .txp_barrage_item_wrapper .txp_text, .txp_barrage_item_wrapper .txp_icon_text {\n                line-height: 1.388em;\n            }\n\n            .txp_barrage .txp_barrage_item_hover .txp_barrage_item_wrapper{\n                background: unset !important;\n            }\n            .txp_barrage .txp_barrage_item_hover .txp_text{\n                background: unset !important;\n            }\n            .txp_barrage .txp_barrage_badge{\n                background: inherit;\n                -webkit-text-fill-color: inherit;\n            }\n            .txp_barrage .txp_icon_text{\n                background: inherit;\n                -webkit-text-fill-color: inherit;\n            }\n            .txp_barrage_badge .txp_icon_text.liked {\n                color: #FF6022;\n                -webkit-text-fill-color: #FF6022;\n            }\n            .txp_barrage_badge.txp_barrage_badge_like {\n                margin-left: 0.77em;\n            }\n            .txp_barrage_badge_like .txp_icon_text_wrapper.txp_none {\n                display: none;\n            }\n            .txp_barrage_badge_like .txp_icon_text_wrapper,\n            .txp_barrage_badge_report .txp_icon_text_wrapper {\n                height: 100%;\n                /* line-height: 2; */\n                /* vertical-align: middle; */\n                display: inline-block;\n            }\n            .txp_barrage .txp_barrage_item_self{\n                /* background: unset !important; */\n                border: 1px solid white;\n                border-radius: 99999px;\n    \n            }\n            .txp_barrage .like{\n                -webkit-text-fill-color: red;\n            }\n            #barrageReport .x_inp_text {\n                width: 100%;\n                height: 48px;\n                padding: 8px;\n                resize: none;\n                color: #8e8e8e;\n                border-radius: 4px;\n                background-color: #f8f8f8;\n                border: 1px solid transparent;\n                font-size: 12px;\n            }\n            #barrageReport .x_modal_ft {\n                background-color: transparent;\n                height: 90px;\n            }\n            #barrageReport input[type="radio"] + span::before {\n                content: "\\a0"; /*\u4e0d\u6362\u884c\u7a7a\u683c*/\n                display: inline-block;\n                vertical-align: middle;\n                font-size: 18px;\n                width: 14px;\n                height: 14px;\n                margin-right: 6px;\n                border-radius: 50%;\n                border: 1px solid #000000;\n                text-indent: .15em;\n                line-height: 1; \n                margin-top: -2px;\n            }\n            #barrageReport input[type="radio"]:checked + span::before {\n                background-color:#FF5C38;\n                border: 1px solid#FF5C38;\n                background-clip: content-box;\n                padding: 2px;\n            }\n            #barrageReport input[type="radio"] {\n                position: absolute;\n                clip: rect(0, 0, 0, 0);\n            }\n            #barrageReport .x_btn.x_btn_primary {\n                background-color:  #FF5C38;\n                background:  #FF5C38;\n                font-size: 14px;\n            }\n\n            #barrageReport .x_btn.x_btn_close {\n                background: #F6F8FA;\n                color: #A2A2B6;\n                font-size: 14px;\n            }\n            #barrageReport .x_modal_form .x_title {\n                margin: 20px auto 10px;\n                font-size: 15px;\n                font-family: PingFangSC-Regular;\n                color: #000028;\n            }\n            #barrageReport .x_btn {\n                margin: 25px 10px 0;\n                padding: 0 10px;\n                font-family: PingFangSC-Medium;\n            }\n            #barrageReport .x_modal_form .x_title.report_reason {\n                margin: 20px auto 8px;\n            }\n            #barrageReport .x_modal_form .x_title.report_desc {\n                margin: 15px auto 8px;\n            }\n            #barrageReport {\n                width: 360px;\n            }\n    </style>\n    <txpdiv class="txp_none">\n        <svg class="txp_svg_sprite" id="txp_svg_icon_like" width="29px" height="28px" viewBox="0 0 29 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title>Like_comment_icon_normal_select-v\u7ad9@1x</title>\n            <g id="v\u7ad9" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="2-v\u7ad9\u5f39\u5e55-hover" transform="translate(-665.000000, -288.000000)" fill="#FFFFFF">\n                    <g id="\u7f16\u7ec4-30" transform="translate(70.000000, 280.000000)">\n                        <g id="win+mac-\u672a\u9009\u4e2d\u5907\u4efd-22" transform="translate(300.000000, 0.000000)">\n                            <g id="Like_comment_icon_normal_select-v\u7ad9" transform="translate(295.000000, 7.500000)">\n                                <path d="M20.2696253,22.3514045 C20.1676633,22.7433211 19.8167246,23.016475 19.4148049,23.016475 L10.0631112,23.016475 L10.0390191,12.1182606 L10.9468421,12.1182606 C11.3535042,12.1182606 11.7079997,11.8415438 11.8087761,11.447252 L12.7019158,8.24715895 C12.9141389,7.50370511 13.5982323,6.98352496 14.365318,6.98352496 C14.9213662,6.98352496 15.4299903,7.24123978 15.7595882,7.69135001 C16.0927428,8.14502312 16.1852199,8.71389594 16.0050082,9.28989452 L15.4711064,10.9971417 C15.3987846,11.2643576 15.4568792,11.5505754 15.6252349,11.7702862 C15.7924051,11.9888094 16.0532379,12.1182606 16.3294836,12.1182606 L21.7109396,12.1182606 C21.9859997,12.1182606 22.2397189,12.2429613 22.4080746,12.4614845 C22.5788016,12.6823829 22.6368962,12.9650379 22.5657599,13.2358166 L20.2696253,22.3514045 Z M5.40414398,13.0101677 C5.40414398,12.5184905 5.80013567,12.1182606 6.28860446,12.1182606 L8.2606133,12.1182606 L8.28470539,23.016475 L6.31269655,23.016475 C5.82422776,23.016475 5.42823607,22.6162451 5.42823607,22.124568 L5.40414398,13.0101677 Z M21.7109396,10.3368217 L17.486633,10.3368217 L17.6893712,9.57674111 C18.0296396,8.49243863 17.8652206,7.55477303 17.1929832,6.63792581 C16.5254883,5.72582909 15.4951985,5.20208606 14.365318,5.20208606 C12.8074345,5.20208606 11.420278,6.25313501 10.9851614,7.78279721 L10.255635,10.3368217 L6.28860446,10.3368217 C4.81964127,10.3368217 3.62573818,11.5351363 3.62573818,13.0101677 L3.64983027,22.124568 C3.64983027,23.5984118 4.84373336,24.7979139 6.31269655,24.7979139 L19.4148049,24.7979139 C20.626492,24.7979139 21.6840507,23.9760768 21.9899365,22.8003271 L24.2860712,13.6859268 C24.4971086,12.8771536 24.3251961,12.0339392 23.8153864,11.3724315 C23.307948,10.7132991 22.5408623,10.3368217 21.7109396,10.3368217 Z"></path>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n        <svg class="txp_svg_sprite" id="txp_svg_icon_like_selected" width="29px" height="29px" viewBox="0 0 29 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title>Like_comment_icon_CB_selected-v\u7ad9@1x</title>\n            <g id="v\u7ad9" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="3-v\u7ad9\u5f39\u5e55-\u70b9\u8d5e" transform="translate(-664.000000, -288.000000)" fill="#FF6022">\n                    <g id="win+mac-\u672a\u9009\u4e2d\u5907\u4efd-5" transform="translate(105.000000, 100.000000)">\n                        <g id="\u7f16\u7ec4-30" transform="translate(-35.000000, 173.000000)">\n                            <g id="win+mac-\u672a\u9009\u4e2d\u5907\u4efd-22" transform="translate(300.000000, 0.000000)">\n                                <g id="\u7ec4\u4ef6/\u64ad\u653e\u5668/\u5f39\u5e55/\u70b9\u8d5e\u56fe\u6807" transform="translate(295.000000, 7.000000)">\n                                    <g id="Like_comment_icon_CB_selected-v\u7ad9" transform="translate(0.000000, 7.500000)">\n                                        <g id="Fill-1\u5907\u4efd-10" transform="translate(0.000000, 1.000000)">\n                                            <path d="M6.58384416,9.51535688 L8.45692879,9.54121052 L8.45718266,23.4227895 L6.60701385,23.4227895 C5.19429162,23.4227895 4.04609849,22.2692116 4.04609849,20.8517956 L4.04609849,20.8517956 L4.02292879,12.0863507 C4.02292879,10.6677926 5.17112192,9.51535688 6.58384416,9.51535688 L6.58384416,9.51535688 Z M14.3513314,4.57721052 C15.4379531,4.57721052 16.428797,5.08090145 17.0707362,5.95807749 C17.7172362,6.83982215 17.8753601,7.74158815 17.5481194,8.78437685 L17.5481194,8.78437685 L17.3531432,9.51535688 L21.4157173,9.51535688 C22.2138655,9.51535688 22.9515824,9.87742043 23.439593,10.5113172 C23.929884,11.1474982 24.0952147,11.9584292 23.892257,12.7362376 L23.892257,12.7362376 L21.6840325,21.5016826 C21.3898579,22.6324173 20.3727891,23.4227895 19.2074928,23.4227895 L19.2074928,23.4227895 L10.1200279,23.4227895 L10.1200279,9.56574613 L11.100588,7.05911616 C11.5190456,5.58801885 12.8530933,4.57721052 14.3513314,4.57721052 Z" id="Fill-1\u5907\u4efd-4"></path>\n                                        </g>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n        <svg class="txp_svg_sprite" id="txp_svg_icon_report" width="29px" height="28px" viewBox="0 0 29 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title>\u4e3e\u62a5-v\u7ad9@1x</title>\n            <g id="v\u7ad9" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="2-v\u7ad9\u5f39\u5e55-hover" transform="translate(-740.000000, -288.000000)">\n                    <g id="\u7f16\u7ec4-30" transform="translate(70.000000, 280.000000)">\n                        <g id="win+mac-\u672a\u9009\u4e2d\u5907\u4efd-22" transform="translate(300.000000, 0.000000)">\n                            <g id="\u4e3e\u62a5" transform="translate(371.000000, 0.000000)">\n                                <g transform="translate(0.000000, 7.500000)" id="\u7f16\u7ec4-31\u5907\u4efd">\n                                    <g>\n                                        <rect id="\u77e9\u5f62" fill="#FFFFFF" x="13.45" y="11.2678754" width="1.8" height="5.83212463" rx="0.9"></rect>\n                                        <circle id="\u692d\u5706\u5f62" fill="#FFFFFF" cx="14.35" cy="19.4" r="1"></circle>\n                                        <path d="M15.6537457,6.09143192 L24.226225,21.1582136 C24.6359023,21.8782525 24.3843045,22.7940684 23.6642656,23.2037457 C23.4382002,23.3323692 23.1825745,23.4 22.9224792,23.4 L5.77752075,23.4 C4.94909363,23.4 4.27752075,22.7284271 4.27752075,21.9 C4.27752075,21.6399047 4.34515159,21.384279 4.47377501,21.1582136 L13.0462543,6.09143192 C13.4559316,5.37139303 14.3717475,5.11979524 15.0917864,5.52947255 C15.3262246,5.66285982 15.5203585,5.85699369 15.6537457,6.09143192 Z" id="\u4e09\u89d2\u5f62" stroke="#FFFFFF" stroke-width="1.8" transform="translate(14.350000, 13.600000) rotate(-360.000000) translate(-14.350000, -13.600000) "></path>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    </txpdiv>\n   \n</txpdiv>',this.dataset.$container=e.firstChild,this.dataset.$scroll=this.dataset.$container.querySelector(".txp_barrage_scroll_wrap"),t.appendChild(this.dataset.$container),this.updateSize(),this._setOpacity(this.dataset.opacity)}},{key:"_setOpacity",value:function(t){this.dataset.$container.style.opacity=t||1}},{key:"_start",value:function(t){this.dataset.timerState=1,this.updateSize(),this.Timer.start(t),this._handlePosition("top","resume"),this._handlePosition("bottom","resume")}},{key:"_pause",value:function(){this.dataset.timerState=2,this.Timer.stop(),this._handlePosition("top","pause"),this._handlePosition("bottom","pause")}},{key:"Animation",value:function(){this._defaultAnimation()}},{key:"_defaultAnimation",value:function(t){this.dataset.count>this.dataset.fps/2&&(this.dataset.count=0,this._create()),this._animate(t),this.dataset.count+=1}},{key:"_getAvailable",value:function(){var s=this,c=[],l=0;c.push({start:0,end:0}),this.active.checkLast(function(t,e){if(t.left+t.width+50>=s.dataset.width){var n=t.height,a=e*n,i=(e-1)*n;if(i===c[l].end)c[l].end=a;else if(i>c[l].end)c.push({start:i,end:a}),l+=1;else for(var o=0,r=c.length;o<r-1;o+=1)if(c[o].start>=a&&(0===o||c[o-1].end<=i)){c.splice(o,0,{start:i,end:a}),l+=1;break}}});for(var t=this.dataset.actualNum,e=1,n=0,a=[];e<=t;){var i=(e-1)*this.dataset.lineHeight,o=e*this.dataset.lineHeight;c[n+1]?(i>=c[n].end&&o<=c[n+1].start&&a.push(e),o>c[n+1].end&&(n+=1)):i>=c[n].end&&a.push(e),e+=1}return a}},{key:"_create",value:function(){this.dataset.enablePosition?this._createPositionDanmu():this._createScroll()}},{key:"_createScroll",value:function(){if(this.dataset.enableScroll){var t=this._getAvailable();if(t.length)for(var e=0,n=t.length;e<n;e+=1){var a=t[e],i=this.list.get(this.dataset.index,1);if(this.dataset.loop&&this._addDanmu(i),!i)break;this._createScrollDanmu(i,a)}}}},{key:"_createScrollDanmu",value:function(t,e){this.emit("showDanmu",t);var n=this.BarragePool.get();n&&(this.dataset.enableColor&&!t.isStar||(t.color="#ffffff",t.gradienColor=[],t.gradienColor.push("#ffffff"),t.gradienColor.push("#ffffff")),n.render(t,this.dataset.fontSize,this.dataset.lineHeight),n.move(this.dataset.width,(e-1)*this.dataset.lineHeight),n.trail=e,this.active.push(n,e))}},{key:"_animate",value:function(){var a=this;this.active.handleDom(function(t){if(!t.isHove){var e=a.dataset.realSpeed[t.trail%2];t.isSys&&(e*=2);var n=t.left-e;if(t.move(n),n+t.width+50<0)return a.BarragePool.save(t),!0}return!1})}},{key:"_toggleColor",value:function(t){t?this.dataset.enableColor=!0:(this.dataset.enableColor=!1,this.active.handleDom(function(t){return t.color("#ffffff"),!1}))}},{key:"_clear",value:function(){this._clearScroll(),this.dataset.enablePosition&&(this._handlePosition("top","clear"),this._handlePosition("bottom","clear"))}},{key:"_clearScroll",value:function(){this.active.handleDom(function(t){return t.move(-t.width-100),!1})}},{key:"_addDanmu",value:function(t){this.list.addList(t)}},{key:"_windowResize",value:function(){var t=this,e=null;window.onresize=function(){1===t.dataset.state&&1===t.dataset.timerState&&t._pause(),e&&clearTimeout(e),e=setTimeout(function(){1===t.dataset.state&&t._start(),t.updateSize()},300)}}},{key:"updateSize",value:function(){this.dataset.width=this.dataset.$container.clientWidth,this.dataset.height=this.dataset.$container.clientHeight,this.updateFont(),this.updateLineNum()}},{key:"updateLineNum",value:function(){this.dataset.maxNum=parseInt((this.dataset.height-this.dataset.marginBottom)/this.dataset.lineHeight,10),this.dataset.maxNum=0<=this.dataset.maxNum?this.dataset.maxNum:0,this.dataset.userNum>this.dataset.maxNum?this.dataset.actualNum=this.dataset.maxNum:this.dataset.actualNum=this.dataset.userNum,this.emit("lineUpdate",this.dataset.maxNum)}},{key:"updateFont",value:function(){this.dataset.autoFont&&(this.dataset.fontSize=X(this.dataset.width,this.dataset.fontSetting),this.dataset.lineHeight=Math.ceil(1.8*this.dataset.fontSize))}},{key:"index",set:function(t){var e,n=t?parseInt(t,10):0;n!==this.dataset.index&&(this.dataset.index=n,1!==this.dataset.state||(e=Math.floor((n+1)/this.dataset.interval))!==this.dataset.currentBlock&&(this.dataset.currentBlock=e,this.emit("blockChange",n)))},get:function(){return this.dataset.index}}]),p}();function nt(t,e,n){this.setRole(t),this.setMap(e),this.setColor(n),this.max=0}(Y=et).prototype._createTopDanmu=function(){this.dataset.topList||(this.dataset.topList=[]);var t,e,n,a=this.dataset.topList;if(a.length<5)t=new this.Factory.TopBarrage,a.push(t),e=a.length;else for(var i=0,o=a.length;i<o;i+=1)if(a[i].available){t=a[i],e=i;break}!t||(n=this.list.get(this.dataset.index,5))&&(this.dataset.enableColor||(n.color="#ffffff",n.gradienColor=[],n.gradienColor.push("#ffffff"),n.gradienColor.push("#ffffff")),this.emit("showDanmu",n),t.render(n,this.dataset.fontSize,this.dataset.lineHeight),t.setTop(e*this.dataset.lineHeight))},Y.prototype._createBottomDanmu=function(){this.dataset.bottomList||(this.dataset.bottomList=[]);var t,e,n,a=this.dataset.bottomList;if(a.length<5)t=new this.Factory.BottomBarrage,a.push(t),e=a.length;else for(var i=0,o=a.length;i<o;i+=1)if(a[i].available){t=a[i],e=i;break}!t||(n=this.list.get(this.dataset.index,6))&&(this.emit("showDanmu",n),this.dataset.enableColor||(n.color="#ffffff",n.gradienColor=[],n.gradienColor.push("#ffffff"),n.gradienColor.push("#ffffff")),t.render(n,this.dataset.fontSize,this.dataset.lineHeight),t.setBottom(e*this.dataset.lineHeight+this.dataset.marginBottom))},Y.prototype._handlePosition=function(t,e){var n,a={clear:"removeAnimate",pause:"pauseAnimate",resume:"resumeAnimate"}[e]||"";switch(t){case"top":n=this.dataset.topList;break;case"bottom":n=this.dataset.bottomList}if(n&&a)for(var i=0,o=n.length;i<o;i+=1)n[i][a]&&n[i][a](!0)},Y.prototype._createTop=function(){this.dataset.enableTop&&this._createTopDanmu()},Y.prototype._createBottom=function(){this.dataset.enableBottom&&this._createBottomDanmu()},Y.prototype._createPositionDanmu=function(){this._createScroll(),this._createTop(),this._createBottom()},(tt=et).prototype.start=function(t){this.dataset.state=1,this._start(t)},tt.prototype.pause=function(){this.dataset.state=2,this._pause()},tt.prototype.setFont=function(t){-1<["xxs","xs","s","m","l","xl","xxl"].indexOf(t)&&(this.dataset.fontSetting=t),this.updateFont(),this.updateLineNum()},tt.prototype.setRate=function(t){this.dataset.rate!==t&&(this.dataset.rate=t,this.dataset.realSpeed={0:this.dataset.speed*this.dataset.rate*1.5,1:this.dataset.speed*this.dataset.rate})},tt.prototype.setOpacity=function(t){this._setOpacity(t)},tt.prototype.setLine=function(t){this.dataset.userNum=t,this.updateLineNum()},tt.prototype.enableColor=function(){this._toggleColor(!0)},tt.prototype.disableColor=function(){this._toggleColor(!1)},tt.prototype.hideScroll=function(){this._clearScroll(),this.dataset.enableScroll=!1},tt.prototype.showScroll=function(){this.dataset.enableScroll=!0},tt.prototype.hideTop=function(){this._handlePosition("top","clear"),this.dataset.enableTop=!1},tt.prototype.showTop=function(){this.dataset.enableTop=!0},tt.prototype.hideBottom=function(){this._handlePosition("bottom","clear"),this.dataset.enableBottom=!1},tt.prototype.showBottom=function(){this.dataset.enableBotton=!0},tt.prototype.switchOn=function(){this.start()},tt.prototype.play=tt.prototype.switchOn,tt.prototype.switchOff=function(){this.pause(),this._clear()},tt.prototype.end=tt.prototype.switchOff,tt.prototype.updateTime=function(t){this.index=t},tt.prototype.add=function(t){t&&this._addDanmu(JSON.parse(JSON.stringify(t)))},nt.prototype={setRole:function(t){this.roleMap=t||{}},setMap:function(t){this.emojiMap=t||{}},setColor:function(t){this.colorMap=t||{}},setMax:function(t){this.max=t||this.max},txvVodHandler:function(t){var e,n,a,i,o,r,s,c,l,d,u,h,p,f=this.removeQQEmoji(this.removeEmoji(this.xssFilter(t.content)))||"",g=f.length+2,m=this.replaceEmoji(f),_=1;return t.isself&&(i=!0),2!=t.isop&&1!=t.isop||(c=!0,g+=2),2==t.rich_type&&t.bb_id?(u=this.roleMap[t.bb_id])&&(1==u.type||u.type,(e=t.bb_head||u.strHeadUrl||e)&&(g+=2),d=!0):0!=t.rich_type&&t.rich_type||(0<t.uservip_degree&&(h="//i.gtimg.cn/qqlive/images/vip/y".concat(t.uservip_degree,".png")),t.bb_head?n=t.bb_head:!t.isself&&2!=t.isop&&1!=t.isop||(a=t.bb_level||h,e=t.bb_head||t.headurl),2!=t.isop&&1!=t.isop||(m="".concat(t.opername,"\uff1a").concat(m),g+=t.opername.length)),t.content_style?((p=JSON.parse(t.content_style)).gradient_colors&&p.gradient_colors[0]&&p.gradient_colors[1]&&((o=[])[0]="#".concat(p.gradient_colors[0]),o[1]="#".concat(p.gradient_colors[1])),s="#".concat(p.color)||!1,p.position&&(_=p.position),p.colorConfigId&&this.colorMap[p.colorConfigId]&&this.colorMap[p.colorConfigId].lottieUrl&&(l=this.colorMap[p.colorConfigId].lottieUrl)):s="#ffffff",r=t.upcount?this.calcHotBarrageColor(this.max,t.upcount):4,{id:t.commentid||"",key:t.key||"",originContent:f,content:m||"",avatar:e||"",up:t.upcount||"",color:s||"",gradienColor:o,boderColor:void 0,bubble:n||"",vip:a||"",animation:l||"",hotLevel:r,isself:i||!1,position:+_,isStar:c||!1,contentLength:g,isRole:!!d,index:t.timepoint||""}},renderDanmu:function(t){var e,n,a="";t.avatar&&t.isRole?a='<img  class="txp_barrage_avatar" src="'.concat(t.avatar.replace("http:",""),'" style="border-radius:unset">'):t.avatar&&(a='<img  class="txp_barrage_avatar" src="'.concat(t.avatar.replace("http:",""),'">')),n=t.vip?(e='<img  class="txp_barrage_vipicon" src="'.concat(t.vip.replace("http:",""),'">'),'<txpdiv class="txp_barrage_item_bubble_front">'.concat(a).concat(e,"</txpdiv>")):a;var i="";t.animation&&(i='style="background-image:url('.concat(t.animation,')"'));var o=this.getReportHtml();return{html:'<txpdiv class="txp_barrage_item_wrapper" style="position:relative;height:100%;">'.concat(n,'<txpdiv class="txp_text">').concat(t.content,"</txpdiv>").concat('<txpdiv class="txp_barrage_badge txp_barrage_badge_like txp_none">\n                  <txpdiv class="txp_icon_text_wrapper unselected">\n                    <svg class="txp_icon txp_svg_icon_like" viewBox="0 1 29 28">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=#txp_svg_icon_like></use>\n                    </svg>\n                  </txpdiv>\n                  <txpdiv class="txp_icon_text_wrapper selected txp_none">\n                    <svg class="txp_icon txp_svg_icon_like" viewBox="0 1 29 28">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=#txp_svg_icon_like_selected></use>\n                    </svg>\n                  </txpdiv>\n                </txpdiv>\n                <txpdiv class="txp_none like">+1</txpdiv>').concat(o,'<div class="txp_barrage_animate" ').concat(i,"></div></txpdiv>"),index:t.index,contentLength:t.contentLength,position:t.position,color:t.color,gradienColor:t.gradienColor,id:t.id,originContent:t.originContent,mustShow:t.isself||t.isStar,isself:t.isself,isStar:t.isStar}},getReportHtml:function(){return'<txpdiv class="txp_barrage_badge txp_barrage_badge_report txp_none">\n              <txpdiv class="txp_icon_text_wrapper report">\n                <svg class="txp_icon txp_svg_icon_report" viewBox="0 0 29 28">\n                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_icon_report"></use>\n                </svg>\n              </txpdiv><txpdiv class="txp_icon_text txp_barrage_badge_report">\u4e3e\u62a5</txpdiv>\n            </txpdiv>'},calcHotBarrageColor:function(t,e){var n="";return n+=100<t?t/2<e?"1":t/4<e?"2":t/8<e?"3":"4":30<e?"1":10<e?"2":0<e?"3":"4"},removeQQEmoji:function(t){return t.replace(/\[[\u4e00-\u9fa5_a-zA-Z0-9][\u4e00-\u9fa5_a-zA-Z0-9][\u4e00-\u9fa5_a-zA-Z0-9][\u4e00-\u9fa5_a-zA-Z0-9][\u4e00-\u9fa5_a-zA-Z0-9]\]/g,"")},removeEmoji:function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"")},replaceEmoji:function(t){var n=this.emojiMap;return t&&n&&(t=t.replace(/\[[^\]]+\]/g,function(e){try{var t=n[e].url;return'<img src="'.concat(t,'" class="txp_barrage_emoji">')}catch(t){return e}})),t},xssFilter:function(t){return"string"==typeof t&&t.constructor==String?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):""},txvLiveCommentHandler:function(t){var e,n,a=this.removeQQEmoji(this.removeEmoji(this.xssFilter(t.content)))||"",i=a.length,o=a;return t.is_self&&(n=!0),2==t.op||t.op,!t.is_self&&2!=t.op&&1!=t.op||(e=t.avatar||t.headurl||t.userAvatar),2!=t.op&&1!=t.op||(o="".concat(t.opername,"\uff1a").concat(o),i+=t.opername.length),4==t.op&&o&&(o=o.split("[")[0]),{id:t.comment_id||"",originContent:a,content:o||"",avatar:e||"",up:t.upcount||"",color:"#ffffff",isself:n||!1,position:1,contentLength:i}}};var at,it=nt,ot=-1<location.href.indexOf("debugDanmu=1")?"//debugaccess.video.qq.com":"//access.video.qq.com",rt={barrageLiveRegist:function(t){var e=$.Deferred();return $.ajax({url:"//bullet.video.qq.com/fcgi-bin/target/regist",data:{otype:"json",type:1,programid:t},dataType:"jsonp"}).done(function(t){t&&0===t.returncode?e.resolve(t):(t.open=0,e.reject(t))}).fail(function(t){e.reject(t)}),e},newBarrageRegist:function(t,e,n){var a=$.Deferred(),i=[];i.push(t);var o={};return o[t]={strCid:e||"",strLid:n||""},$.ajax({url:"".concat(ot,"/danmu_manage/regist?vappid=97767206&vsecret=c0bdcbae120669fff425d0ef853674614aa659c605a613a4&raw=1"),type:"post",data:JSON.stringify({wRegistType:2,vecIdList:i,wSpeSource:0,bIsGetUserCfg:1,mapExtData:o}),headers:{"content-type":"text/plain"},xhrFields:{withCredentials:!0},dataType:"json"}).done(function(t){t&&0==t.ret?a.resolve(t.data):(t.open=0,a.reject(t))}).fail(function(t){a.reject(t)}),a},barrageNum:function(t){var e=$.Deferred();return $.ajax({url:"//tunnel.video.qq.com/fcgi/danmu_read_count",data:{ddwTargetId:t,ddwUin:0,dwGetTotal:1,wOnlyTotalCount:0,strSessionKey:"",dwGetPubCount:1,raw:1,vappid:29188582,vsecret:"37ae5f4003c9a2332e566d8c53bf32b0d4ddfa4ac6717cd1"},dataType:"json"}).done(function(t){t&&0===t.ret?e.resolve(t):e.reject(t)}).fail(function(t){e.reject(t)}),e}},st=function(r,t,e){var s=$.Deferred();return rt.newBarrageRegist(r,t,e).then(function(t){var e,n,a,i,o;t&&t.stMap&&t.stMap[r]?(e=t.stMap[r],o={returncode:0,registid:e.strDanMuKey.split("targetid=")[1].split("&")[0],bulletkey:e.strDanMuKey,isShowBubble:e.iIsBubbleFlg,open:e.wOpened,vid:r,openMask:!1,isSupportAntiBlocking:!1},e&&e.antiBlockingInfo&&e.antiBlockingInfo.isSupportAntiBlocking&&(a=((n=e.antiBlockingInfo).cdnUrl+n.frameRateList[0]).replace("http:",""),i=n.sliceDuration,o.openMask=!0,o.cdnMask=a,o.durationMask=i,o.isSupportAntiBlocking=!0)):o={returncode:0,open:0,vid:r,openMask:!1},rt.barrageNum(o.registid).done(function(t){try{o.barrageNum=t.data.dwPubCount}catch(t){o.barrageNum=-1}}).fail(function(t){o.barrageNum=-1}).always(function(t){s.resolve(o)})}).fail(function(t){s.reject()}),s};if("function"==typeof window.Zepto)at=window.Zepto;else if("function"==typeof window.jQuery)at=window.jQuery;else{if("function"!=typeof window.jq)throw ReferenceError("$ is not defined!");at=window.jq}var ct=at,lt={cookie:{set:function(t,e,n,a,i){var o,r;return i&&(o=new Date,(r=new Date).setTime(o.getTime()+36e5*i)),document.cookie="".concat(t,"=").concat(e,"; ").concat(i?"expires=".concat(r.toGMTString(),"; "):"").concat(a?"path=".concat(a,"; "):"path=/; ").concat("domain=".concat(n||window.location.host,";")),!0},get:function(t){var e=new RegExp("(?:^|;+|\\s+)".concat(t,"=([^;]*)")),n=document.cookie.match(e);return n?n[1]:""},del:function(t,e,n){var a=new Date;a.setTime(a.getTime()-1),document.cookie="".concat(t,"=; expires=").concat(a.toGMTString(),";").concat(n?"path=".concat(n,"; "):"path=/; ").concat("domain=".concat(e||window.location.host,";"))}},getHostNameByUrl:function(t){t=t||location.href;var e=document.createElement("a");return e.href=t,e.hostname},log:function(){if(window.console&&window.console.log&&-1!=location.href.indexOf("debug=1"))try{window.console.log.apply&&window.console.log.apply(window.console,arguments)}catch(t){}},showInfo:function(t,e){window.console&&window.console.log&&("object"===r(e)&&window.JSON&&window.JSON.stringify&&(e=JSON.stringify(e)),lt.log("%c".concat(t,": %c \t\t").concat(e||""),"background: gray;color:#fff;","color:green;"))},showError:function(t,e){window.console&&window.console.log&&("object"===r(e)&&window.JSON&&window.JSON.stringify&&(e=JSON.stringify(e)),lt.log("%c".concat(t,": %c \t\t").concat(e||""),"background: red;color:#fff;","color: red;"))},getData:function(t){return window.localStorage?window.localStorage[t]:""},setData:function(t,e){if(window.localStorage)try{window.localStorage[t]=e}catch(t){lt.showError(t)}},delData:function(t){window.localStorage&&window.localStorage.removeItem(t)},dateFormat:function(t,e){t=t||"yyyy-MM-dd hh:mm:ss";var n={"M+":(e=e||new Date).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,"".concat(e.getFullYear()).substr(4-RegExp.$1.length))),n)new RegExp("(".concat(a,")")).test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:"00".concat(n[a]).substr("".concat(n[a]).length)));return t},getUrlParam:function(t,e){e=e||document.location.toString();var n=new RegExp("(^|&|\\\\?)".concat(t,"=([^&]*)(&|$|#)")),a=null;return(a=e.match(n))?a[2]:""},getJsonpCallbackName:function(t){return["txminiplayerJsonpCallBack",t,parseInt(1e6*Math.random())].join("_")}},dt={time33:function(t){for(var e=0,n=t.length,a=5381;e<n;++e)a+=(a<<5)+t.charAt(e).charCodeAt();return 2147483647&a},getToken:function(){var t=dt.getSkey();return t?dt.time33(t):""},getWXToken:function(){var t=ct.trim(lt.cookie.get("vusession"));return t?dt.time33(t):""},getVToken:function(){var t;return"qq"==dt.getLoginType()?(t=ct.trim(lt.cookie.get("vqq_vusession")))?dt.time33(t):"":"wx"==dt.getLoginType()?(t=ct.trim(lt.cookie.get("vusession")))?dt.time33(t):"":void 0},getAvatar:function(t){if("wx"==dt.getLoginType())return dt.getWxHead();if("qq"==dt.getLoginType())return dt.getQQHead();if(""===dt.getSkey())return"";var e=lt.cookie.get("lw_nick");if(""===e)return e;var n=e.split("|"),a=dt.getUinOnly();return n[1]&&n[1]==a&&n[2]?(t=dt.getValidAvatarSize(t),decodeURIComponent(n[2]).replace(/([\?&]?s=)40([&$])/,"$1".concat(t,"$2"))):""},getLoginType:function(){return lt.cookie.get("main_login")},getWxHead:function(){return lt.cookie.get("wx_head")},getQQHead:function(){return lt.cookie.get("qq_head")},getSkey:function(){return ct.trim(lt.cookie.get("skey"))||ct.trim(lt.cookie.get("lskey"))},getUinOnly:function(){if(""===dt.getSkey())return 0;var t=parseInt(lt.cookie.get("uin").replace(/^o0*/g,""),10);return(!t||t<=1e4)&&(!(t=parseInt(lt.cookie.get("luin").replace(/^o0*/g,""),10))||t<=1e4)?0:t},getValidAvatarSize:function(t){var e=[40,100];return-1==ct.inArray(t,e)?e[0]:t},isLogin:function(){return"wx"==this.getLoginType()||1e4<this.getUinOnly()},getNick:function(){return"wx"==dt.getLoginType()?lt.cookie.get("wx_nick"):"qq"==dt.getLoginType()?lt.cookie.get("qq_nick"):""}},ut=dt,ht=-1<window.location.href.indexOf("debugDanmu=1");var pt={getVodDanmu:function(t){var e=ct.Deferred(),n=ht?"//10.175.81.103:8080/danmu?otype=json":"//mfm.video.qq.com/danmu?otype=json";return ct.ajax({url:n,dataType:"jsonp",data:t,success:function(t){0===t.err_code&&t.comments?e.resolve(t):e.reject(t)},error:function(t){e.reject(t)}}),e},like:function(t){var e=ct.Deferred();return ct.ajax({url:"//bullet.video.qq.com/fcgi-bin/comment/up",data:{otype:"json",targetid:t.target_id,commentid:t.commentId,vid:t.vid,ran:Math.round(1e4*Math.random()),platform:101,g_tk:ut.getToken()||"",g_wxtk:ut.getWXToken()||"",g_vstk:ut.getVToken()||"",head:ut.getAvatar()||"",nick:ut.getNick()||""},dataType:"jsonp"}).done(function(t){t&&0===t.returncode&&"OK"===t.returnmsg?e.resolve(t):e.reject(t)}).fail(function(t){e.reject(t)}),e},getLiveDanmu:function(t){var e=ct.Deferred(),n={last_stamp:t.last_stamp||0,pid:t.pid,session_key:t.session_key,is_no_prop:0};return ct.ajax({url:"//mfm.video.qq.com/live_danmu?callback=?",data:n,dataType:"jsonp",callback:"liveBullet",timeout:t.timeout||2e3,success:function(t){0==t.err_code&&"ok"==t.err_msg?e.resolve(t):e.reject(t)},error:function(){e.reject({})}}),e}};u(function(t){function o(t,e,n,a){var o,r,s,c,i=e&&e.prototype instanceof h?e:h,l=Object.create(i.prototype),d=new p(a||[]);return l._invoke=(o=t,r=n,s=d,c=m,function(t,e){if(c===x)throw new Error("Generator is already running");if(c===v){if("throw"===t)throw e;return f()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var a=function t(e,n){var a=e.iterator[n.method];if(a===g){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=g,t(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;if(!o)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y;{if(!o.done)return o;n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g)}n.delegate=null;return y}(n,s);if(a){if(a===y)continue;return a}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===m)throw c=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=x;var i=u(o,r,s);if("normal"===i.type){if(c=s.done?v:_,i.arg===y)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(c=v,s.method="throw",s.arg=i.arg)}}),l}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function h(){}function n(){}function e(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function r(c){var e;this._invoke=function(n,a){function t(){return new Promise(function(t,e){!function e(t,n,a,i){var o=u(c[t],c,n);if("throw"!==o.type){var r=o.arg,s=r.value;return s&&"object"===O(s)&&C.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,a,i)},function(t){e("throw",t,a,i)}):Promise.resolve(s).then(function(t){r.value=t,a(r)},i)}i(o.arg)}(n,a,t,e)})}return e=e?e.then(t,t):t()}}function i(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function s(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function c(e){if(e){var t=e[T];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(C.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return a.next=a}}return{next:f}}function f(){return{value:g,done:!0}}var l,g,m,_,x,v,y,d,b,w,k,S,C,L,T,j,M,F;l=function(){return this}()||Function("return this")(),S=Object.prototype,C=S.hasOwnProperty,L="function"==typeof Symbol?Symbol:{},T=L.iterator||"@@iterator",j=L.asyncIterator||"@@asyncIterator",M=L.toStringTag||"@@toStringTag",(F=l.regeneratorRuntime)?t.exports=F:((F=l.regeneratorRuntime=t.exports).wrap=o,m="suspendedStart",_="suspendedYield",x="executing",v="completed",y={},(d={})[T]=function(){return this},(w=(b=Object.getPrototypeOf)&&b(b(c([]))))&&w!==S&&C.call(w,T)&&(d=w),k=e.prototype=h.prototype=Object.create(d),(n.prototype=k.constructor=e).constructor=n,e[M]=n.displayName="GeneratorFunction",F.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))},F.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,e):(t.__proto__=e,M in t||(t[M]="GeneratorFunction")),t.prototype=Object.create(k),t},F.awrap=function(t){return{__await:t}},a(r.prototype),r.prototype[j]=function(){return this},F.AsyncIterator=r,F.async=function(t,e,n,a){var i=new r(o(t,e,n,a));return F.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},a(k),k[M]="Generator",k[T]=function(){return this},k.toString=function(){return"[object Generator]"},F.keys=function(n){var a=[];for(var t in n)a.push(t);return a.reverse(),function t(){for(;a.length;){var e=a.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},F.values=c,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(s),!t)for(var e in this)"t"===e.charAt(0)&&C.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function t(t,e){return o.type="throw",o.arg=n,a.next=t,e&&(a.method="next",a.arg=g),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var r=C.call(i,"catchLoc"),s=C.call(i,"finallyLoc");if(r&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(r){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&C.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),s(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a,i=n.completion;return"throw"===i.type&&(a=i.arg,s(n)),a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:c(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),y}})});var ft,gt=function(){m(o,et);var s,a,i=_(o);function o(t){var e,n;return f(this,o),(e=i.call(this,t)).addEventListener(),e.handler=new it,e.params={target_id:null,session_key:"0,0,0"},t.report&&(n=l(e),e.dataset.$reporter=t.report,e.dataset.$reporter&&e.dataset.$reporter.on("mouseenter",function(t){n.reportTimer&&clearTimeout(n.reportTimer),n.dataset.inReporter=!0}).on("mouseleave",function(){n.dataset.inReporter=!1,n._hideReport()}).on("click",function(){n.dataset.inReporter=!1,n._hideReport(),n.emit("report",n.dataset.reportMessage)})),t.videoTag&&(e.$videoTag=t.videoTag),e}return g(o,[{key:"_hideReport",value:function(){this.dataset.inReporter||(this.dataset.isShowingReport=!1,this.dataset.$reporter&&this.dataset.$reporter.addClass("txp_none"))}},{key:"init",value:(s=regeneratorRuntime.mark(function t(e,n,a){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.dataset.vid=e,t.next=3,st(e,n,a);case 3:return(i=t.sent).openMask=!1,this.vodInit(i),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}),a=function(){var t=this,r=arguments;return new Promise(function(e,n){var a=s.apply(t,r);function i(t){c(a,e,n,i,o,"next",t)}function o(t){c(a,e,n,i,o,"throw",t)}i(void 0)})},function(t,e,n){return a.apply(this,arguments)})},{key:"vodInit",value:function(t){this.dataset.vid=t.vid,this.list.reset(),t.open?(this.params.target_id=t.registid,this.params.session_key="0,0,0",this.initMask(t),this.getDanmu(0)):(this._clearMask(),this.pause())}},{key:"addIntroTxt",value:function(t){var e,n,a,i,o=this,r=(null===(e=this.dataset)||void 0===e||null===(n=e.float)||void 0===n||null===(a=n.dataset)||void 0===a?void 0:a.vid)||(null===(i=this.dataset)||void 0===i?void 0:i.vid);this.getIntroTxt(r).then(function(t){o._addIntroTxt(t)},function(){o.getBackupIntroTxt(t)})}},{key:"getBackupIntroTxt",value:function(){var n=this;this.fetchBackupIntroTxt().then(function(t){var e=(t[0]||{}).copywriting;n._addIntroTxt(e)},function(){n._addIntroTxt("\u5f39\u5e55\u5927\u519b\u524d\u65b9\u6765\u88ad\uff0c\u706b\u529bPK\u7b49\u4f60\u6765\u6218\uff01")})}},{key:"_addIntroTxt",value:function(t){this.addSys({content:t,contentLength:t.length,originContent:t,mustShow:!0,isSys:!0})}},{key:"getIntroTxt",value:function(n){var a=$.Deferred();return $.ajax({url:"https://node.video.qq.com/x/api/wuji_cache/object?_size=10000&appid=danmu_richmedia_online&schemaid=danmu_vid_leading_copywritint&schemakey=b59dd89d8c6047f98f556db7bc90fa04",type:"get",headers:{"content-type":"text/plain"},xhrFields:{withCredentials:!0},dataType:"json",timeout:1e3}).done(function(t){var e;t&&200==t.code&&t.data&&(e=t.data.find(function(t){return t.vid===n}))?a.resolve(e.copywriting):a.reject()}).fail(function(){a.reject()}),a}},{key:"fetchBackupIntroTxt",value:function(){var e=$.Deferred();return $.ajax({url:"https://node.video.qq.com/x/api/wuji_cache/object?appid=danmu_richmedia_online&schemaid=danmu_leading_copywritint&schemakey=e9c3cbea612e4c6e955e7440158d55c4",type:"get",headers:{"content-type":"text/plain"},xhrFields:{withCredentials:!0},dataType:"json",timeout:1e3}).done(function(t){t&&200==t.code&&t.data?e.resolve(t.data):e.reject()}).fail(function(){e.reject()}),e}},{key:"getDanmu",value:function(t,e){var n;this.params.target_id&&(n=this,(e=e||this.params).timestamp=30*parseInt((t+1)/30)+15,pt.getVodDanmu(e).then(function(t){t&&t.session_key&&(n.params.session_key=t.session_key),t&&t.comments&&(n.list.clear(),n.addVodDanmu(t.comments))}))}},{key:"Animation",value:function(){this._maskHandler&&this._maskHandler(),this._defaultAnimation()}},{key:"clearDanmuCacheList",value:function(){this.dataset.danmuCacheList={}}},{key:"addVodDanmu",value:function(t){var e=this,n=t.map(function(t){return e.handler.txvVodHandler(t)}).filter(function(t){return""!==t.content}).map(function(t){return e.handler.renderDanmu(t)});this._addDanmu(n)}},{key:"addEventListener",value:function(){var e=this;this.on("blockChange",function(t){e.getDanmu(t)})}},{key:"_clickHandler",value:function(n){this.emit("danmuClick"),n.id&&(n.id<1e3&&this.dataset.keyMap[n.id]&&(n.id=this.dataset.keyMap[n.id]),this.changeLikeThumbColor(n),pt.like({commentId:n.id,target_id:this.params.target_id,vid:this.dataset.vid}).then(function(){var t=$(n.el).find(".txp_barrage_badge_like:first"),e=$(n.el).find(".like");e.removeClass("txp_none").addClass("txp_barrage_plusone"),t.hasClass("txp_none")?e.css("right","0.5em"):e.css("right","3.8em")}))}},{key:"changeLikeThumbColor",value:function(t){$(t.el).find(".unselected").addClass("txp_none"),$(t.el).find(".selected").removeClass("txp_none")}},{key:"_menuHandler",value:function(t){this.dataset.reportMessage={id:t.danmuItem.id,content:t.danmuItem.originContent},this.dataset.isShowingReport=!0,this.dataset.$reporter&&this.dataset.$reporter.css({left:t.x>this.dataset.width-100?t.x-80:t.x,top:t.y}).removeClass("txp_none"),this.autoHide()}},{key:"_reportHandler",value:function(t){this.dataset.reportMessage={id:t.danmuItem.id,content:t.danmuItem.originContent},this.dataset.isShowingReport=!0,this.emit("report",this.dataset.reportMessage)}},{key:"autoHide",value:function(){var t=this;this.reportTimer&&clearTimeout(this.reportTimer),this.reportTimer=setTimeout(function(){t.dataset.$reporter.addClass("txp_none")},2e3)}},{key:"updateRichData",value:function(t){this.handler.setRole(t.roleMap),this.handler.setMap(t.emojiMap),this.handler.setColor(t.colorMap)}},{key:"add",value:function(t){t.key&&(this.dataset.keyMap[t.key]=null,t.commentid=t.key),this._addDanmu(this.handler.renderDanmu(this.handler.txvVodHandler(t)))}},{key:"addSys",value:function(t){this._addDanmu(t)}},{key:"setKeyMap",value:function(t,e){this.dataset.keyMap[t]=e}}]),o}();(ft=gt).prototype.initMask=function(t){this._clearMask(),this.dataset.openmask=t.openMask,this.dataset.openmask&&(this.dataset.showMask=!0,this.dataset.lastBlock_mask=0,this.dataset.currentBlock_mask=0,this.maskList=[],this._setMaskCdn(t.cdnMask),this._getMaskInfo(),this.dataset.maskDuration=t.durationMask)},ft.prototype.enableMask=function(){this.dataset.showMask=!0},ft.prototype.disableMack=function(){this.dataset.showMask=!1,this._clearMask()},ft.prototype._maskHandler=function(){this.dataset.openmask&&this.dataset.showMask&&(this._refreshMask(),this._countMaskBlock(this.dataset.index),this.dataset.lastBlock_mask!==this.dataset.currentBlock_mask&&this._getMaskInfo())},ft.prototype._countMaskBlock=function(t){var e=Math.floor((t+5)/this.dataset.maskDuration);this.dataset.lastBlock_mask=this.dataset.currentBlock_mask,this.dataset.currentBlock_mask=e},ft.prototype._clearMask=function(){ct(this.dataset.$container).css({"-webkit-mask-size":"","-webkit-mask-repeat":"","-webkit-mask-position":"","-webkit-mask-image":""})},ft.prototype._refreshMask=function(){var t,e,n,a,i;this.$videoTag&&((e=this.$videoTag.currentTime.toFixed(2).split("."))[1]=parseInt(parseInt(e[1]/4,10)/3,10),8===e[1]&&(e[1]=7),e[0]===this.currentSecond&&e[1]===this.currentFrame||(a=(n=o(e,2))[0],i=n[1],this.currentSecond=a,this.currentFrame=i,this.maskList[this.dataset.index]&&this.maskList[e[0]]&&this.maskList[e[0]][e[1]]&&(t=this.maskList[e[0]][e[1]].picData),t?ct(this.dataset.$container).css({"-webkit-mask-size":"contain, contain","-webkit-mask-repeat":"no-repeat, no-repeat","-webkit-mask-position":"center center, center center","-webkit-mask-image":'url("data:image/svg+xml;base64,'.concat(t,'")')}):ct(this.dataset.$container).css({"-webkit-mask-size":"","-webkit-mask-repeat":"","-webkit-mask-position":"","-webkit-mask-image":""})))},ft.prototype._getMaskInfo=function(){var a,t,e;this.dataset.openmask&&this.dataset.showMask&&(t=(a=this).dataset.currentBlock_mask,e="".concat(this.dataset.cdnUrl,"/").concat(t,".json"),ct.getJSON(e,function(t){if(t&&t.timeArray)for(var e=0,n=t.timeArray.length;e<n;e+=1)a.maskList[t.timeArray[e].time]=t.timeArray[e].frameArray}))},ft.prototype._setMaskCdn=function(t){this.dataset.cdnUrl=t};var mt,_t=(mt=Object.freeze({__proto__:null,default:'<div class="x_modal" style="display:none;z-index:1000" id="barrageReport">\n\t\x3c!--[if IE]><iframe src="about:blank" frameborder="0" class="x_iframe_mask"></iframe><![endif]--\x3e\n\t<div class="x_modal_bd">\n\t\t<div class="x_modal_form">\n\t\t\t<h3 class="x_title">\u4e3e\u62a5\u5185\u5bb9:</h3>\n\t\t\t<div class="x_area">\u5b57\u5e55\u662f\u559c\u6b22\u8c01\u7ed9\u8c01\u914d\u5b57\u5e55\u5417\uff1f\u5b57\u5e55\u662f\u559c\u6b22\u8c01\u7ed9\u8c01\u914d\u5b57\u5e55\u5417\uff1f\u5b57\u5e55\u662f\u559c</div>\n\t\t\t<h3 class="x_title report_reason">\u60a8\u4e3a\u4ec0\u4e48\u8981\u4e3e\u62a5\u6b64\u4fe1\u606f\uff1f</h3>\n\t\t\t<div class="x_options" style="color:black">\n\t\t\t\t<label class="x_lable"><input type="radio" name="barrage_report_type" value="1" class="x_radio"><span class="x_text">\u8272\u60c5\u6deb\u79fd</span></label>\n\t\t\t\t<label class="x_lable"><input type="radio" name="barrage_report_type" value="8" class="x_radio"><span class="x_text">\u9a9a\u6270\u8c29\u9a82</span></label>\n\t\t\t\t<label class="x_lable"><input type="radio" name="barrage_report_type" value="1024" class="x_radio"><span class="x_text">\u5e7f\u544a\u6b3a\u8bc8</span></label>\n\t\t\t\t<label class="x_lable"><input type="radio" name="barrage_report_type" value="32" class="x_radio"><span class="x_text">\u5730\u57df\u653b\u51fb</span></label>\n\t\t\t\t<label class="x_lable"><input type="radio" name="barrage_report_type" value="0" class="x_radio"><span class="x_text">\u5176\u4ed6</span></label>\n\t\t\t</div>\n\t\t\t<h3 class="x_title report_desc">\u4e3e\u62a5\u8bf4\u660e\uff08\u53ef\u9009\uff09</h3>\n\t\t\t<div class="x_desc"><textarea maxlength="128" autocomplete="off" type="text" class="x_inp_text" id="report_input" placeholder="\u8bf7\u63cf\u8ff0\u6076\u610f\u884c\u4e3a"></textarea></div>\n\t\t</div>\n\t</div>\n\t<div class="x_modal_ft">\n\t\t<a class="x_btn x_btn_primary" href="javascript:;">\u4e3e\u62a5</a>\n\t\t<a class="x_btn x_btn_close" href="javascript:;">\u53d6\u6d88</a>\n\t</div>\n</div>\n<div class="x_alert report_result" style="display:none;z-index:1000">\n\t\x3c!--[if IE]><iframe src="about:blank" frameborder="0" class="x_iframe_mask"></iframe><![endif]--\x3e\n\t<div class="x_alert_bd report_fail">\n\t\t<a href="javascript:;" class="x_close" title="\u5173\u95ed"><i class="x_iconfont x_icon_close">\ue601</i></a>\n\t\t<div class="x_title" style="color:black"><i class="x_iconfont x_icon_warning">\ue602</i>\u63d0\u4ea4\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5</div>\n\t\t\x3c!-- <div class="x_desc">\u8bf7\u91cd\u8bd5</div> --\x3e\n    </div>\n    <div class="x_alert_bd report_success">\n\t\t<a href="javascript:;" class="x_close" title="\u5173\u95ed"><i class="x_iconfont x_icon_close">\ue601</i></a>\n\t\t<div class="x_title" style="color:black"><i class="x_iconfont x_icon_check">\ue600</i>\u4e3e\u62a5\u5df2\u63d0\u4ea4</div>\n\t\t\n\n\t</div>+\n</div>'}))&&mt.default||mt;function xt(t){this.dataset={},this.write(t),this.addEvent()}xt.prototype={write:function(t){var e=document.createElement("div");e.innerHTML=_t,this.el=e.firstChild,t.append(this.el),this.dataset.$mod=$("#barrageReport"),this.dataset.$reportResult=$(".report_result"),this.dataset.$textArea=this.dataset.$mod.find(".x_area"),this.dataset.$input=$("#report_input")},addEvent:function(){var e=this;this.dataset.$mod.on("click",".x_close,.x_btn_close",function(){e.hide()}).on("click",".x_btn_primary",function(){e.submit()}),this.dataset.$input.on("input porpertychange keydown keyup",function(t){t.stopPropagation()}).on("keypress",function(t){t.stopPropagation(),13==t.which&&e.submit()}),this.dataset.$reportResult.on("click",".x_close",function(){e.hideResult()})},submit:function(){var t,e,n=this;t={id:n.dataset.id,type:$('input[name="barrage_report_type"]:checked').val(),targetId:n.dataset.targetId,desc:n.dataset.$input.val().replace(/\s+/g," ")},e=$.Deferred(),$.ajax({url:"//access.video.qq.com/danmu_manage/msg_report?vappid=90355472&vsecret=b5a6aa567a55d84008e258a9f69bfdb8e929aa97c4c12c24",data:{commentId:t.id,type:t.type||0,targetId:t.targetId||"",desc:t.desc||""},dataType:"jsonp"}).done(function(t){t&&0==t.ret&&t.data&&0==t.data.errCode?e.resolve(t):e.reject(t)}).fail(function(t){e.reject(t)}),e.done(function(t){}).fail(function(t){}),n.hide(),n.showSuccess()},init:function(t){this.dataset.$mod.css({display:"block"}),this.dataset.id=t.id,this.dataset.content=t.content,this.dataset.targetId=t.targetId,this.dataset.$input.val(""),$('input[name="barrage_report_type"]:first').attr("checked",!0),this.updateContent(this.dataset.content),$(".mod_action")&&$(".mod_action").css({"z-index":1})},updateContent:function(t){this.dataset.$textArea[0].innerText=t},hide:function(){this.dataset.$mod.css({display:"none"}),$(".mod_action")&&$(".mod_action").css({"z-index":3})},showSuccess:function(){var t=this;this.dataset.$reportResult.css({display:"block"}),this.dataset.$reportResult.find(".report_success").css({display:"block"}),this.dataset.$reportResult.find(".report_fail").css({display:"none"}),$(".mod_action")&&$(".mod_action").css({"z-index":1}),setTimeout(function(){t.hideResult()},3e3)},showFail:function(){this.dataset.$reportResult.css({display:"block"}),this.dataset.$reportResult.find(".report_success").css({display:"none"}),this.dataset.$reportResult.find(".report_fail").css({display:"block"}),setTimeout(function(){that.hideResult()},3e3)},hideResult:function(){this.dataset.$reportResult.css({display:"none"}),$(".mod_action")&&$(".mod_action").css({"z-index":3})}};var vt=xt;window.vodFloat=gt,window.barrageReport=vt,e.barrageReport=vt,e.vodFloat=gt},278:function(t,e){t.exports='<txpdiv class="txp_barrage" data-role="txp_barrage_float">\n   \n</txpdiv>'},279:function(t,e){t.exports='<txp class="txp_barrage_report txp_none" data-role="txp_barrage_report" style="position:fixed">\n    <svg class="txp_icon txp_svg_icon_report" viewBox="0 0 20 20" width="20" height="20">\n        <use class="txp_svg_symbol txp_svg_icon_report" xlink:href="#txp_svg_icon_report"></use>\n    </svg>\u4e3e\u62a5\n</txp>'},58:function(t,e){var n=Txplayer.$,o=Txplayer.util,r={time33:function(t){for(var e=0,n=t.length,a=5381;e<n;++e)a+=(a<<5)+t.charAt(e).charCodeAt();return 2147483647&a},getToken:function(){var t=r.getSkey();return t?r.time33(t):""},getWXToken:function(){var t=n.trim(o.cookie.get("vusession"));return t?r.time33(t):""},getVToken:function(){var t;return"qq"==r.getLoginType()?(t=n.trim(o.cookie.get("vqq_vusession")))?r.time33(t):"":"wx"==r.getLoginType()?(t=n.trim(o.cookie.get("vusession")))?r.time33(t):"":void 0},getAvatar:function(){return"wx"==r.getLoginType()?r.getWxHead():"qq"==r.getLoginType()?r.getQQHead():void 0},getLoginType:function(){return o.cookie.get("main_login")},getWxHead:function(){return o.cookie.get("wx_head")},getQQHead:function(){var t=o.cookie.get("qq_head");if(t)return t;if(""===r.getSkey())return"";var e=o.cookie.get("lw_nick");if(""===e)return e;var n=e.split("|"),a=r.getUinOnly();if(n[1]&&n[1]==a&&n[2]){var i=r.getValidAvatarSize(40);return decodeURIComponent(n[2]).replace(/([\?&]?s=)40([&$])/,"$1"+i+"$2")}return""},getSkey:function(){return n.trim(o.cookie.get("skey"))||n.trim(o.cookie.get("lskey"))},getUinOnly:function(){if(""===r.getSkey())return 0;var t=parseInt(o.cookie.get("uin").replace(/^o0*/g,""),10);return(!t||t<=1e4)&&(!(t=parseInt(o.cookie.get("luin").replace(/^o0*/g,""),10))||t<=1e4)?0:t},getValidAvatarSize:function(t){var e=[40,100];return-1==n.inArray(t,e)?e[0]:t},isLogin:function(){return"wx"==this.getLoginType()||1e4<this.getUinOnly()},getNick:function(){return"wx"==r.getLoginType()?o.cookie.get("wx_nick"):"qq"==r.getLoginType()?o.cookie.get("qq_nick"):""}};t.exports=r}});